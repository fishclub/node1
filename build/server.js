var express=require("express"),app=express(),port=process.env.PORT||3e3,mongoose=require("mongoose"),passport=require("passport"),flash=require("connect-flash"),morgan=require("morgan"),cookieParser=require("cookie-parser"),bodyParser=require("body-parser"),session=require("express-session"),configDB=require("./config/database.js"),util=require("util"),expressValidator=require("express-validator");mongoose.connect(configDB.url),require("./config/passport")(passport),app.use(morgan("dev")),app.use(cookieParser()),app.use(bodyParser()),app.use(expressValidator()),app.get("/test1",function(e,s){e.checkBody("postparam","Invalid postparam").notEmpty().isInt(),e.checkParams("urlparam","Invalid urlparam").isAlpha(),e.checkQuery("getparam","Invalid getparam").isInt(),e.sanitize("postparam").toBoolean();var r=e.validationErrors();r&&s.render("addnote.ejs",{message:"There have been validation errors: "+util.inspect(r)})}),app.set("view engine","ejs"),app.use(session({secret:"ilovescotchscotchyscotchscotch"})),app.use(passport.initialize()),app.use(passport.session()),app.use(flash()),require("./app/routes.js")(app,passport),app.listen(port),console.log("The magic happens on port "+port);